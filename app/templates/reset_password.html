<form method="POST" action="">
  <div class="form-group">
    <label for="new_password">New password</label>
    <input
      type="password"
      id="new_password"
      name="password"
      minlength="8"
      required
      class="form-control"
      placeholder="Enter new password">
  </div>

  <div class="form-group">
    <label for="confirm_password">Confirm new password</label>
    <input
      type="password"
      id="confirm_password"
      name="confirm_password"
      required
      class="form-control"
      placeholder="Re-enter new password"
      oninput="this.setCustomValidity(this.value !== document.getElementById('new_password').value ? 'Passwords do not match.' : '')">
  </div>

  <button type="submit" class="btn btn-primary">Reset Password</button>
</form>

<script>
  // Keep validity in sync if the first field changes after typing confirm
  (function () {
    var p = document.getElementById('new_password');
    var c = document.getElementById('confirm_password');
    if (p && c) {
      p.addEventListener('input', function () {
        if (c.value) {
          c.setCustomValidity(c.value !== p.value ? 'Passwords do not match.' : '');
        }
      });
    }
  })();
</script>
