<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Welcome to Helpdesk</title>

    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>



    <style>
        /* Minimal overrides for welcome page */

        /* Welcome Section */
        .welcome-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: calc(100vh - 160px);
            background-color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 1200px;
            padding: 60px;
            border-radius: 12px;
            text-align: center;
        }


               h1 {
                    font-size: clamp(28px, 5vw, 48px);
                    line-height: 1.2;

             }




        p {
            font-size: 18px;
            color: #495057;
            margin-top: 15px;
            max-width: 800px;
        }

        /* Quick Search & Links */
        .quick-search {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 10px;
            max-width: 600px;
            width: 100%;
        }

        #searchInput {
            flex: 1;
            padding: 10px 15px;
            font-size: 16px;
            border: 1.5px solid #ccc;
            border-radius: 8px 0 0 8px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        #searchInput:focus {
            border-color: #232f3e;
        }

        #searchButton {
            background-color: #232f3e;
            border: none;
            color: white;
            padding: 0 20px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 16px;
        }

        #searchButton:hover {
            background-color: #ffa500;
        }

        .quick-links {
            margin-top: 40px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

.quick-links .btn {
    min-width: 160px;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 20px;
    border-radius: 10px;
    transition: background-color 0.3s ease;
    line-height: 1.2; /* Add this */
    height: 50px; /* Optional: consistent button height */

}
.quick-links .btn i {
    font-size: 18px;
    line-height: 1;
    vertical-align: middle; /* ðŸ”§ Fix misalignment */
}



        .quick-links .btn:hover {
            opacity: 0.85;
        }

        /* Announcements */
        .announcements {
            margin-top: 50px;
            max-width: 800px;
            text-align: left;
        }

        .announcements h2 {
            color: #232f3e;
            margin-bottom: 15px;
            border-bottom: 2px solid #ffa500;
            padding-bottom: 5px;
        }

        .announcements ul {
            list-style: none;
        }

        .announcements li {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
            color: #495057;
        }
        footer{
       margin-bottom:30px;
           margin-top:30px;
           text-align:center; }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-container {
                height: auto;
                padding: 60px;
                margin: 10px;
                max-width: 95%;
            }






        }
    </style>
    <!-- Bootstrap JS (needed for alert dismiss) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body>
    <!-- Header with Navigation -->
    <header class="header">
        <a href="{{ url_for('home') }}">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Helpdesk Logo" />
        </a>

        <div class="hamburger" onclick="toggleNav()" aria-label="Toggle navigation" role="button" tabindex="0">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <nav class="nav" id="navbar" aria-label="Primary Navigation">
            <a href="/submit_ticket">Submit a Ticket</a>
            <a href="/tickets">View Tickets</a>
            {% if 'username' in session %}
                {% if session['role'] == 'admin' %}
                    <a href="{{ url_for('admin_users') }}">Manage Users</a>
                {% endif %}
                <a href="#" class="btn btn-danger" onclick="confirmLogout()">Logout</a>
>
            {% else %}
                <a href="/login" class="btn btn-warning">Login</a>
            {% endif %}
        </nav>
    </header>

     {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

    <!-- Main Welcome Content -->
    <div class="welcome-container" role="main">
        <h1>Welcome to the Apprentice Helpdesk</h1>
        <p>Weâ€™re here to assist you with all your queries and issues. Feel free to explore our help topics or submit a ticket for personalized support.</p>

        {% if 'username' in session %}
            <p class="user-greeting">Hello, <strong>{{ session['username'] }}</strong>! </p>
        {% endif %}

        <!-- Quick Search -->
        <div class="quick-search" aria-label="Search Helpdesk Topics">
            <input type="text" id="searchInput" placeholder="Search FAQs, topics, or tickets..." aria-label="Search Helpdesk Topics" />
            <button id="searchButton" aria-label="Search Button"><i class="fas fa-search"></i> Search</button>
        </div>

        <!-- Quick Links -->
        <div class="quick-links" role="navigation" aria-label="Quick Links">
            <button onclick="location.href='{{ url_for('submit_ticket') }}'" class="btn btn-success" aria-label="Submit a Ticket">
                <i class="fas fa-plus-circle"></i> Submit a Ticket
            </button>
            <button onclick="location.href='{{ url_for('tickets') }}'" class="btn btn-primary" aria-label="View My Tickets">
                <i class="fas fa-ticket-alt"></i> View My Tickets
            </button>
            <button onclick="location.href='/faq'" class="btn btn-info" aria-label="FAQ">
                <i class="fas fa-question-circle"></i> FAQ
            </button>
        </div>

        <!-- Announcements -->
        <section class="announcements" aria-live="polite" aria-atomic="true" aria-relevant="additions removals">
            <h2>Latest Announcements</h2>
            <ul>
                {% for announcement in announcements %}
                    <li><strong>{{ announcement.date.strftime('%b %d, %Y') }}:</strong> {{ announcement.message }}</li>
                {% else %}
                    <li>No announcements at this time. Check back soon!</li>
                {% endfor %}
            </ul>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        &copy; {{ current_year }} Apprentice Helpdesk. All rights reserved.
    </footer>




    <script>
        // Toggle navigation menu for hamburger
        function toggleNav() {
            const nav = document.getElementById('navbar');
            nav.classList.toggle('active');
        }

        // Allow keyboard toggle on hamburger for accessibility
        document.querySelector('.hamburger').addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleNav();
            }
        });

        // Handle quick search button click
        document.getElementById('searchButton').addEventListener('click', function () {
            const query = document.getElementById('searchInput').value.trim();
            if (query) {
                // Redirect to search results page or tickets filtered by search query
                window.location.href = '/search?query=' + encodeURIComponent(query);
            } else {
                Swal.fire('Please enter a search term to continue.');
            }
        });

        // Optional: enter key triggers search
        document.getElementById('searchInput').addEventListener('keyup', function (event) {
            if (event.key === 'Enter') {
                document.getElementById('searchButton').click();
            }
        });

  function confirmLogout() {
    Swal.fire({
        title: 'Are you sure you want to logout?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#dc3545',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Logout'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = '{{ url_for("logout") }}';
        }
    });
}
    </script>
</body>

</html>
